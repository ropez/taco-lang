
fun test_range() {
    s = State(0)
    for i in 3..5 {
        s.set(s.get() + i)
    }

    assert s.get() == 12
}

fun test_range_as_arg() {
    s = State(0)

    fun foo(rng: range) {
        for i in rng {
            s.set(s.get() + i)
        }
    }

    foo(3..5)

    assert s.get() == 12
}

fun test_map_over_range() {
    res = {1..3}.map(fun(i: int) { "foo $i" })

    assert res == ["foo 1", "foo 2", "foo 3"]
}
