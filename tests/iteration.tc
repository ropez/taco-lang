
fun test_simple_iteration() {
    list = [1, 2, 3]

    s = State(0)
    for it in list {
        s.update(fun(s) { s + it })
    }

    assert s.get() == 6
}

fun test_empty_list_iteration() {
    fun foo(): [int] { [] }

    for item in foo() {
        assert false
    }
}

fun test_while_break() {
    s = State(0)
    while true {
        s.update(fun(s) { s + 1 })
        if s.get() == 4 {
            break
        }
    }
    assert s.get() == 4
}

fun test_break_from_range() {
    s = State(0)
    for i in 1..100 {
        s.set(i)
        if i < 10 {
            continue
        } else {
            break
        }
    }

    assert s.get() == 10
}
