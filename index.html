<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>taco-wasm</title>

    <style>
      body {
        width: 100vw;
        margin: 0;
        background-color: #f0f0f0;
      }

      .ui {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        width: 65vw;
        margin: auto;
        text-align: center;
      }

      #input {
        height: 300px;
        width: 100%;
        font-family: monospace;
        padding: 5px;
      }

      #output {
        height: 300px;
        width: 100%;
        font-family: monospace;
        padding: 5px;
      }

      button {
        padding: 15px 50px;
      }
    </style>
  </head>
  <body>
    <div class="ui">
      <h2>Taco language demo</h2>
      <p><textarea id="input">println("Hello, Taco")</textarea></p>
      <p><button type="button" id="run">Run</button></p>
      <p><textarea id="output"></textarea></p>
    </div>

    <script type="module">
      import init, { wasm_main } from "./pkg/taco.js";

      const run = () => {
        const source = document.getElementById("input").value;
        const output = wasm_main(source);
        document.getElementById("output").value = output;
      };

      init().then(() => {
        document.getElementById("run").addEventListener("click", run);
      });
    </script>
  </body>
</html>
